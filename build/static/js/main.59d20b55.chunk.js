(this["webpackJsonptemper-ionic"]=this["webpackJsonptemper-ionic"]||[]).push([[7],{103:function(e,t,n){e.exports=n(148)},109:function(e,t,n){var a={"./ion-action-sheet-ios.entry.js":[152,11],"./ion-action-sheet-md.entry.js":[153,12],"./ion-alert-ios.entry.js":[154,13],"./ion-alert-md.entry.js":[155,14],"./ion-app_8-ios.entry.js":[156,15],"./ion-app_8-md.entry.js":[157,16],"./ion-avatar_3-ios.entry.js":[158,33],"./ion-avatar_3-md.entry.js":[159,34],"./ion-back-button-ios.entry.js":[160,35],"./ion-back-button-md.entry.js":[161,36],"./ion-backdrop-ios.entry.js":[162,77],"./ion-backdrop-md.entry.js":[163,78],"./ion-button_2-ios.entry.js":[164,37],"./ion-button_2-md.entry.js":[165,38],"./ion-card_5-ios.entry.js":[166,39],"./ion-card_5-md.entry.js":[167,40],"./ion-checkbox-ios.entry.js":[168,41],"./ion-checkbox-md.entry.js":[169,42],"./ion-chip-ios.entry.js":[170,43],"./ion-chip-md.entry.js":[171,44],"./ion-col_3.entry.js":[172,79],"./ion-datetime_3-ios.entry.js":[173,21],"./ion-datetime_3-md.entry.js":[174,22],"./ion-fab_3-ios.entry.js":[175,45],"./ion-fab_3-md.entry.js":[176,46],"./ion-img.entry.js":[177,80],"./ion-infinite-scroll_2-ios.entry.js":[178,81],"./ion-infinite-scroll_2-md.entry.js":[179,82],"./ion-input-ios.entry.js":[180,47],"./ion-input-md.entry.js":[181,48],"./ion-item-option_3-ios.entry.js":[182,49],"./ion-item-option_3-md.entry.js":[183,50],"./ion-item_8-ios.entry.js":[184,51],"./ion-item_8-md.entry.js":[185,52],"./ion-loading-ios.entry.js":[186,53],"./ion-loading-md.entry.js":[187,54],"./ion-menu_3-ios.entry.js":[188,55],"./ion-menu_3-md.entry.js":[189,56],"./ion-modal-ios.entry.js":[190,17],"./ion-modal-md.entry.js":[191,18],"./ion-nav_2.entry.js":[192,29],"./ion-popover-ios.entry.js":[193,19],"./ion-popover-md.entry.js":[194,20],"./ion-progress-bar-ios.entry.js":[195,57],"./ion-progress-bar-md.entry.js":[196,58],"./ion-radio_2-ios.entry.js":[197,59],"./ion-radio_2-md.entry.js":[198,60],"./ion-range-ios.entry.js":[199,61],"./ion-range-md.entry.js":[200,62],"./ion-refresher_2-ios.entry.js":[201,23],"./ion-refresher_2-md.entry.js":[202,24],"./ion-reorder_2-ios.entry.js":[203,31],"./ion-reorder_2-md.entry.js":[204,32],"./ion-ripple-effect.entry.js":[205,83],"./ion-route_4.entry.js":[206,63],"./ion-searchbar-ios.entry.js":[207,64],"./ion-searchbar-md.entry.js":[208,65],"./ion-segment_2-ios.entry.js":[209,66],"./ion-segment_2-md.entry.js":[210,67],"./ion-select_3-ios.entry.js":[211,68],"./ion-select_3-md.entry.js":[212,69],"./ion-slide_2-ios.entry.js":[213,84],"./ion-slide_2-md.entry.js":[214,85],"./ion-spinner.entry.js":[215,27],"./ion-split-pane-ios.entry.js":[216,86],"./ion-split-pane-md.entry.js":[217,87],"./ion-tab-bar_2-ios.entry.js":[218,70],"./ion-tab-bar_2-md.entry.js":[219,71],"./ion-tab_2.entry.js":[220,30],"./ion-text.entry.js":[221,72],"./ion-textarea-ios.entry.js":[222,73],"./ion-textarea-md.entry.js":[223,74],"./ion-toast-ios.entry.js":[224,75],"./ion-toast-md.entry.js":[225,76],"./ion-toggle-ios.entry.js":[226,25],"./ion-toggle-md.entry.js":[227,26],"./ion-virtual-scroll.entry.js":[228,88]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=109,e.exports=r},111:function(e,t,n){var a={"./ion-icon.entry.js":[230,91]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=111,e.exports=r},116:function(e,t,n){},117:function(e,t,n){},124:function(e,t,n){},130:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(45),l=n.n(o),c=n(4),i=n(12),s=n(1),m=n(75),u=n(5),d=n(7),p=n.n(d),h=n(16),E=(n(116),n(117),n(56),n(51)),f=n.n(E),g=n(23),y=n.n(g),b=n(241),j=n(242),O=n(234),v=n(243),w=n(57),k=n.n(w),S=n(58),N=n.n(S),x=n(233),C=n(237),_=y.a.icon({iconUrl:k.a,shadowUrl:N.a});y.a.Marker.prototype.options.icon=_;var I=function(e){var t=e.token,n=e.id,o=Object(a.useState)(),l=Object(c.a)(o,2),m=l[0],d=l[1],E=Object(a.useState)(),g=Object(c.a)(E,2),y=g[0],w=g[1],k=Object(a.useState)(),S=Object(c.a)(k,2),N=S[0],_=S[1],I=Object(a.useState)({temperature:null,humidity:null,date:null}),M=Object(c.a)(I,2),D=M[0],F=M[1],T=Object(a.useState)({lon:0,lat:0}),z=Object(c.a)(T,2),A=z[0],P=z[1],J=Object(a.useState)(!0),L=Object(c.a)(J,2),U=L[0],q=L[1],R=Object(a.useState)(!1),Y=Object(c.a)(R,2),W=Y[0],B=Y[1],K=function(){function e(){return(e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://"+window.location.hostname+":8000/api/v1/probe/"+t+"/toggle",{method:"PUT"}).then((function(e){return e.json()})).then((function(e){w(e.response.data.state),B(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}B(!0),function(){e.apply(this,arguments)}()};Object(a.useEffect)((function(){function e(){return(e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://"+window.location.hostname+":8000/api/v1/probe/"+t).then((function(e){return e.json()})).then((function(e){d(e.response.data.name),w(e.response.data.state),_(e.response.data.category),F(e.response.data.lastmeasure),P(e.response.data.gps),q(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]);var Q=Object(i.g)();return r.a.createElement(s.f,null,U?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.t,null,r.a.createElement(s.M,{animated:!0})),r.a.createElement(s.g,null,r.a.createElement(s.M,{animated:!0,style:{heigth:"100px"}}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(s.t,null,r.a.createElement(x.a,{as:"h3",size:"md"},m||"Sonde #"+n),r.a.createElement(s.k,{outline:!0,className:"ion-margin-horizontal",color:"tertiary"},N),r.a.createElement(s.k,{color:y?"success":"danger"},y?"Active":"Disabled"),r.a.createElement(s.e,{fill:"outline",slot:"end",onClick:function(){return Q.push("/probe/"+t)}},"VIEW")),r.a.createElement(s.g,null,D.temperature&&D.humidity&&D.date?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.B,{lines:"full"},r.a.createElement(s.y,null,"Last Measures"),r.a.createElement(s.e,null,"See All")),r.a.createElement(s.A,null,r.a.createElement(s.t,null,r.a.createElement(s.y,null,r.a.createElement("h2",null,r.a.createElement(s.r,{icon:u.O,className:"ion-margin-horizontal",color:"primary"}),D.temperature?D.temperature+" \xb0C":"No temperature \u274c"),r.a.createElement("h3",null,r.a.createElement(s.r,{icon:u.F,className:"ion-margin-horizontal",color:"secondary"}),D.humidity?D.humidity+" %":"No humidity \u274c"),r.a.createElement("p",null,r.a.createElement(s.r,{icon:u.Q,className:"ion-margin-horizontal",color:"tertiary"}),D.date?f()(D.date).fromNow():"No date \u274c"))))):r.a.createElement(r.a.Fragment,null," "),A.lon&&A.lat?r.a.createElement(b.a,{center:[A.lat,A.lon],zoom:4,style:{height:"200px",width:"99%"}},r.a.createElement(j.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"Temper \ud83d\udc9e"})," ",r.a.createElement(O.a,{position:[A.lat,A.lon]},r.a.createElement(v.a,null,r.a.createElement(C.a,{variantColor:y?"red":"green",variant:"ghost",onClick:function(){return K()}},y?"Turn off":"Turn on")))):"",r.a.createElement(s.e,{expand:"block",color:y?"danger":"success",onClick:function(){K()}},r.a.createElement(s.r,{icon:y?u.p:u.q,slot:"start"}),y?"Disable":"Activate",W?r.a.createElement(s.P,{name:"crescent",className:"ml-3"}):""))))},M=function(e){var t=e.token,n=Object(a.useState)(!0),o=Object(c.a)(n,2),l=o[0],i=o[1],m=Object(a.useState)([]),u=Object(c.a)(m,2),d=u[0],E=u[1],f=Object(a.useState)(),g=Object(c.a)(f,2),y=g[0],b=g[1];Object(a.useEffect)((function(){function e(){return(e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://"+window.location.hostname+":8000/api/v1/probe/user/"+t).then((function(e){return e.json()})).then((function(e){E(e.response.data),i(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]);var j=d.map((function(e,t){return r.a.createElement(s.l,{sizeLg:"4",key:t},r.a.createElement(I,{token:e,id:t+1}))}));return r.a.createElement(s.m,null,r.a.createElement(s.L,{value:y,onIonChange:function(e){return b(e.detail.value)},showCancelButton:"focus",animated:!0}),l?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.M,{animated:!0,style:{height:"20vh"}}),r.a.createElement(s.M,{animated:!0,style:{height:"10vh"}}),r.a.createElement(s.M,{animated:!0,style:{height:"30vh"}}),r.a.createElement(s.M,{animated:!0,style:{height:"5vh"}})):r.a.createElement(r.a.Fragment,null,r.a.createElement(s.q,null,r.a.createElement(s.K,null,j))))},D=n(98),F=n.n(D),T=(n(124),["/register","/login","/forgot"]),z=function(){"1"===localStorage.getItem("auth.logged")||T.includes(window.location.pathname)||(window.location.pathname="/login")},A=function(){z();var e=Object(a.useState)(!1),t=Object(c.a)(e,2),n=t[0],o=t[1],l=Object(a.useState)(),i=Object(c.a)(l,2),m=i[0],d=i[1],p=Object(a.useState)(),h=Object(c.a)(p,2),E=h[0],f=h[1],g=Object(a.useState)(!1),y=Object(c.a)(g,2),b=y[0],j=y[1],O=Object(a.useState)(),v=Object(c.a)(O,2),w=v[0],k=v[1],S=Object(a.useState)(!1),N=Object(c.a)(S,2),x=N[0],C=N[1],_=Object(a.useState)(!1),I=Object(c.a)(_,2),D=I[0],T=I[1],A=JSON.parse(localStorage.getItem("auth")||'{"user": {"name": "","email": ""},"token": ""}'),P=Object(a.useState)(A.token),J=Object(c.a)(P,2),L=J[0],U=J[1];return r.a.createElement(s.D,null,r.a.createElement(s.m,null,r.a.createElement("div",{className:"p-3 ml-2 mb-2 display-1",style:{fontFamily:"Nunito"}},"Probes"),r.a.createElement(M,{token:L}),r.a.createElement(s.n,{horizontal:"end",vertical:"bottom",slot:"fixed"},r.a.createElement(s.o,{color:"dark"},r.a.createElement(s.r,{icon:u.c})),r.a.createElement(s.p,{side:"top"},r.a.createElement(s.o,{color:"light",onClick:function(){return o(!0)}},r.a.createElement(s.r,{icon:u.a})),r.a.createElement(s.o,{color:"light",onClick:function(){return F.a.fire("QR Code","Clicked on QRCode","success")}},r.a.createElement(s.r,{icon:u.D})),r.a.createElement(s.o,{color:"light",onClick:function(){return j(!0)}},r.a.createElement(s.r,{icon:u.e})))),r.a.createElement(s.C,{isOpen:n},r.a.createElement(s.m,{className:"ion-padding"},r.a.createElement(s.t,null,r.a.createElement(s.s,{value:m,placeholder:"Probe's name",onIonChange:function(e){return d(e.detail.value)}})),r.a.createElement(s.t,null,r.a.createElement(s.s,{value:E,placeholder:"Probe's category",onIonChange:function(e){return f(e.detail.value)}})),r.a.createElement(s.e,{color:"success",onClick:function(){return C(!0),void fetch("http://"+window.location.hostname+":8000/api/v1/probe/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user:A.token,name:m,category:E})}).then((function(e){return e.json()})).then((function(e){e.response&&U("".concat(A.token," ")),C(!1),o(!1)}))}},"Validate",x?r.a.createElement(s.P,{name:"crescent",className:"ml-3"}):""),r.a.createElement(s.e,{color:"secondary",slot:"end",onClick:function(){return o(!1)}},"Close"))),r.a.createElement(s.C,{isOpen:b},r.a.createElement(s.m,{className:"ion-padding"},r.a.createElement(s.t,null,r.a.createElement(s.s,{value:w,placeholder:"Access token",onIonChange:function(e){return k(e.detail.value)},className:"my-3"})),r.a.createElement(s.e,{color:"success",onClick:function(){return T(!0),void fetch("http://"+window.location.hostname+":8000/api/v1/share/token",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user:A.token,share:w})}).then((function(e){return e.json()})).then((function(e){e.response&&U("".concat(A.token," ")),T(!1),j(!1)}))}},"Validate",D?r.a.createElement(s.P,{name:"crescent",className:"ml-3"}):""),r.a.createElement(s.e,{color:"secondary",slot:"end",onClick:function(){return o(!1)}},"Close")))))},P=y.a.icon({iconUrl:k.a,shadowUrl:N.a});y.a.Marker.prototype.options.icon=P;var J=function(e){var t=e.token,n=Object(a.useState)(!0),o=Object(c.a)(n,2),l=o[0],i=o[1],m=Object(a.useState)([{lon:0,lat:0}]),u=Object(c.a)(m,2),d=u[0],E=u[1];return Object(a.useEffect)((function(){function e(){return(e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://"+window.location.hostname+":8000/api/v1/probe/user/"+t).then((function(e){return e.json()})).then((function(e){e.response.data.forEach((function(e){fetch("http://"+window.location.hostname+":8000/api/v1/probe/"+e).then((function(e){return e.json()})).then((function(e){e.response.data.gps.lon&&e.response.data.gps.lat&&E(d.concat(e.response.data.gps))}))})),i(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),r.a.createElement(s.m,null,l?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.M,{animated:!0,style:{height:"15vh"}}),r.a.createElement(s.M,{animated:!0,style:{height:"45vh"}}),r.a.createElement(s.M,{animated:!0,style:{height:"30vh"}})):r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{center:[43,1],zoom:3,style:{height:"98%",width:"99%"}},r.a.createElement(j.a,{attribution:"Temper \ud83d\udc9e",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),console.log(d),d.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(O.a,{position:[d[t].lon,d[t].lat]},r.a.createElement(v.a,null,r.a.createElement(s.e,null,"Coucou"))))})))))},L=function(){z();var e=JSON.parse(localStorage.getItem("auth")||'{"user": {"name": "","email": ""},"token": ""}');return r.a.createElement(s.D,null,r.a.createElement(J,{token:e.token}))},U=n(239),q=function(){var e=Object(a.useState)({name:"",token:"",email:""}),t=Object(c.a)(e,2),n=t[0],o=t[1],l=localStorage.getItem("auth.dev")||"0",m=Object(a.useState)("true"===localStorage.getItem("darkMode")||!1),d=Object(c.a)(m,2),E=d[0],f=d[1],g=Object(a.useState)(0),y=Object(c.a)(g,2),b=y[0],j=y[1],O=Object(a.useState)(!1),v=Object(c.a)(O,2),w=v[0],k=v[1],S=Object(a.useState)("You're ".concat(b," steps away from Dev Mode. \ud83d\udd28")),N=Object(c.a)(S,2),x=N[0],C=N[1],_=Object(a.useState)("1"===l),I=Object(c.a)(_,2),M=I[0],D=I[1],F=function(e){f(e),localStorage.setItem("darkMode","".concat(e)),document.body.classList.toggle("dark",e)},T=function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.parse(localStorage.getItem("auth")||'{"user": {"name": "","email": ""},"token": ""}'),o({name:t.user.name,token:t.token,email:t.user.email});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://"+window.location.hostname+":8000/api/v1/user/logout/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({token:n.token})}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("auth.logged","0"),localStorage.setItem("auth",""),o({name:"",token:"",email:""}),window.location.href="http://"+window.location.hostname+":3000/login"}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){T(),F(E)}),[]);var A=Object(i.g)(),P=function(e){return A.push(e)};return r.a.createElement(s.D,null,r.a.createElement(s.m,null,r.a.createElement(s.f,{className:"shadow-lg p-0 m-0"},r.a.createElement(s.h,null,r.a.createElement(s.K,{className:"ion-justify-content-center"},r.a.createElement(s.l,{className:"ion-justify-content-center",size:"12"},r.a.createElement("div",{className:"row m-0 justify-content-center"},r.a.createElement(U.a,{size:"2xl",name:n.name,src:"",textAlign:"center",onClick:function(){return j(b+1),k(!0),void(M?C("You're already a developper"):7===b?(D(!0),localStorage.setItem("auth.dev","1"),C("You're now a developper! Congrats \ud83e\udd34")):C("You're ".concat(7-b," steps away from Dev Mode. \ud83d\udd28")))}})),r.a.createElement(s.j,{className:"display-4 text-center"},n.name),r.a.createElement(s.i,{className:"text-center"},n.email)))),r.a.createElement(s.u,null),r.a.createElement(s.t,null,r.a.createElement(s.r,{icon:E?u.y:u.M,slot:"start"}),r.a.createElement(s.y,null,"Toggle Dark Mode"),r.a.createElement(s.V,{checked:E,onIonChange:function(e){return F(e.detail.checked)},slot:"end"})),r.a.createElement(s.u,null),r.a.createElement(s.x,null,r.a.createElement(s.t,{button:!0,onClick:function(){z()}},r.a.createElement(s.r,{icon:u.u,slot:"start"}),r.a.createElement(s.y,null,"Log Out")),r.a.createElement(s.w,null,r.a.createElement(s.v,{color:"primary"},r.a.createElement(s.r,{icon:u.z}),r.a.createElement(s.y,null,"Switch Accounts")))),r.a.createElement(s.t,{button:!0,onClick:function(){}},r.a.createElement(s.r,{icon:u.K,slot:"start"}),r.a.createElement(s.y,null,"Settings")),r.a.createElement(s.t,{button:!0,onClick:function(){P("/about")}},r.a.createElement(s.r,{icon:u.r,slot:"start"}),r.a.createElement(s.y,null,"About")),M?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.u,null),r.a.createElement(s.t,{button:!0,onClick:function(){P("/dev")}},r.a.createElement(s.r,{icon:u.f,slot:"start"}),r.a.createElement(s.y,null,"Developper Tools"))):""),r.a.createElement(s.U,{isOpen:w,onDidDismiss:function(){return k(!1)},message:x,duration:50})))},R=n(235),Y=n(13),W=n(236),B=n(100),K=n.n(B),Q=(n(130),function(){var e=Object(i.h)().pathname.split("/")[2],t=Object(i.g)(),n=Object(a.useState)(),o=Object(c.a)(n,2),l=o[0],m=o[1],d=Object(a.useState)(""),E=Object(c.a)(d,2),g=E[0],y=E[1],v=Object(a.useState)(),w=Object(c.a)(v,2),k=w[0],S=w[1],N=Object(a.useState)(),C=Object(c.a)(N,2),_=C[0],I=C[1],M=Object(a.useState)([{temperature:null,humidity:null,date:null}]),D=Object(c.a)(M,2),F=D[0],T=D[1],z=Object(a.useState)({lon:0,lat:0}),A=Object(c.a)(z,2),P=A[0],J=A[1],L=Object(a.useState)({name:"",email:"",loading:!0}),U=Object(c.a)(L,2),q=U[0],B=U[1],Q=Object(a.useState)(!0),V=Object(c.a)(Q,2),G=V[0],H=V[1],$=Object(a.useState)(!1),X=Object(c.a)($,2),Z=X[0],ee=X[1],te=Object(a.useState)(!1),ne=Object(c.a)(te,2),ae=ne[0],re=ne[1],oe=Object(a.useState)({token:e,duration:"1day"}),le=Object(c.a)(oe,2),ce=le[0],ie=le[1],se=function(){var t=Object(h.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://"+window.location.hostname+":8000/api/v1/measure/probe/"+e+"_limit=6").then((function(e){return e.json()})).then((function(e){T(e.response.data||[{temperature:0,humidity:0,date:""}])}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),me=function(){var t=Object(h.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://"+window.location.hostname+":8000/api/v1/probe/"+e).then((function(e){return e.json()})).then((function(e){m(e.response.data.name),S(e.response.data.state),I(e.response.data.category),J(e.response.data.gps),y(e.response.data.created_at),H(!1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ue=function(){var t=Object(h.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://"+window.location.hostname+":8000/api/v1/probe/"+e+"/owner").then((function(e){return e.json()})).then((function(e){B({name:e.response.data.name,email:e.response.data.email,loading:!1}||{name:"Unable to fetch",email:"",loading:!1})}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){me(),se(),ue()}),[]);var de=r.a.createElement(b.a,{center:[43,1],zoom:12,style:{height:"50vh",width:"99%"}},r.a.createElement(j.a,{attribution:"Temper \ud83d\udc9e",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r.a.createElement(r.a.Fragment,null,"",r.a.createElement(O.a,{position:[P.lon,P.lat]}))),pe=P.lon&&P.lat?de:"";return r.a.createElement(s.D,null,r.a.createElement(s.m,{scrollEvents:!0,onIonScrollStart:function(){},onIonScroll:function(e){},onIonScrollEnd:function(){}},r.a.createElement(s.O,{pager:!0,options:{initialSlide:0,speed:400}},r.a.createElement(s.N,null,r.a.createElement(s.f,{className:"has-card-footer",style:{height:"83vh",width:"90%",textAlign:"start"}},r.a.createElement(s.h,null,r.a.createElement(s.j,null,G?r.a.createElement(s.M,{animated:!0,style:{height:"10vh"}}):r.a.createElement(s.t,null,r.a.createElement(s.e,{fill:"clear",onClick:function(){return e="/probes",t.push(e);var e}},r.a.createElement(s.r,{slot:"icon-only",icon:u.i})),r.a.createElement("div",{className:"display-4 ml-3",style:{fontFamily:"Nunito"}},l||"Sonde #"+e),r.a.createElement(s.e,{fill:"clear",onClick:function(){return ee(!0)},slot:"end"},r.a.createElement(s.r,{slot:"icon-only",icon:u.n})))),r.a.createElement(s.i,null,G?r.a.createElement(s.M,{animated:!0,style:{height:"10vh"}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(s.k,{outline:!0,className:"mx-3",color:"warning"},_),r.a.createElement(s.k,{color:k?"success":"danger"},k?"Active":"Disabled")))),r.a.createElement(s.g,null,G?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.M,{animated:!0,style:{height:"50vh"}})):pe),r.a.createElement(s.K,{className:"ion-card-footer"},r.a.createElement(s.l,null,r.a.createElement(s.r,{icon:u.P,className:"mr-2",color:"tertiary"}),G?r.a.createElement(s.M,{animated:!0,style:{width:"60%"}}):g?"Created "+f()(g).fromNow():""),r.a.createElement(s.l,null,r.a.createElement(s.r,{icon:u.C,className:"mx-2",color:"tertiary"}),"Owner :"," ",q.loading?r.a.createElement(s.M,{animated:!0,style:{width:"60%"}}):q.name+(q.email?" - "+q.email:""))))),r.a.createElement(s.N,null,r.a.createElement(s.H,{slot:"fixed",onIonRefresh:function(e){se().then((function(){e.detail.complete()}))}},r.a.createElement(s.I,null)),r.a.createElement(s.f,{style:{height:"83vh",width:"90%",textAlign:"start"}},r.a.createElement(s.h,null,r.a.createElement(s.j,null,r.a.createElement(x.a,{as:"h1",size:"2xl",className:"ml-3"},"Measures of ",l))),r.a.createElement(s.g,null,r.a.createElement(R.a,{spacing:4},F.map((function(e,t){var n=t-1===-1?0:t-1,a=(e.temperature-F[n].temperature)/F[n].temperature*100,o=(e.humidity-F[n].humidity)/F[n].humidity*100;return a=Math.round(100*a)/100,o=Math.round(100*o)/100,r.a.createElement(Y.a,{p:5,borderWidth:"1px",key:t},r.a.createElement(W.c,null,r.a.createElement(W.a,null,r.a.createElement(W.e,null,r.a.createElement(s.r,{icon:u.N,className:"mr-2",color:"primary"}),"Temperature"),r.a.createElement(W.f,{style:{fontSize:"1.5rem",fontWeight:"bold"}},e.temperature," \xb0C"),r.a.createElement(W.d,null,r.a.createElement(W.b,{type:a>=0?"increase":"decrease"}),a," %")),r.a.createElement(W.a,null,r.a.createElement(W.e,null,r.a.createElement(s.r,{icon:u.E,className:"mr-2",color:"secondary"}),"Humidty"),r.a.createElement(W.f,{style:{fontSize:"1.5rem",fontWeight:"bold"}},e.humidity," %"),r.a.createElement(W.d,null,r.a.createElement(W.b,{type:o>=0?"increase":"decrease"}),o," %")),r.a.createElement(W.a,null,r.a.createElement(W.e,null,r.a.createElement(s.r,{icon:u.P,className:"mr-2",color:"tertiary"}),"Date"),r.a.createElement(W.f,{style:{fontSize:"1.5rem",fontWeight:"bold"}},f()(e.date).fromNow()),r.a.createElement(W.d,null,f()(e.date).format("MMMM Do YYYY, h:mm:ss a")))))})))))),r.a.createElement(s.N,null,"Settings of probe")),r.a.createElement(s.n,{horizontal:"end",vertical:"bottom",slot:"fixed",id:"scroll",className:"d-none"},r.a.createElement(s.o,{color:"dark",onClick:function(){document.querySelector("ion-content").scrollToTop(500)}},r.a.createElement(s.r,{icon:u.d}))),r.a.createElement(s.C,{isOpen:ae,cssClass:"modal-qrcode"},r.a.createElement("div",{className:"p-5"},r.a.createElement(s.T,{className:"display-6",style:{fontFamily:"Nunito"}},"Share via QR Code"),r.a.createElement("div",{className:"w-100 mt-3"},r.a.createElement(K.a,{value:JSON.stringify(ce),size:150,includeMargin:!0,bgColor:"#eeeeee",className:"mx-auto mb-2"})),r.a.createElement(s.A,null,r.a.createElement(s.G,{value:ce.duration,onIonChange:function(t){return ie({token:e,duration:t.detail.value})}},r.a.createElement(s.B,null,r.a.createElement(s.y,null,"Duration of the share")),r.a.createElement(s.t,null,r.a.createElement(s.y,null,"1 day"),r.a.createElement(s.F,{slot:"start",value:"1day"})),r.a.createElement(s.t,null,r.a.createElement(s.y,null,"1 week"),r.a.createElement(s.F,{slot:"start",value:"1week"})),r.a.createElement(s.t,null,r.a.createElement(s.y,null,"1 month"),r.a.createElement(s.F,{slot:"start",value:"1month"})),r.a.createElement(s.t,null,r.a.createElement(s.y,null,"Always"),r.a.createElement(s.F,{slot:"start",value:"always"})))),r.a.createElement(s.e,{fill:"outline",color:"danger",expand:"block",onClick:function(){return re(!1)}},r.a.createElement(s.r,{icon:u.k}),"Close"))),r.a.createElement(s.b,{isOpen:Z,onDidDismiss:function(){return ee(!1)},buttons:[{text:"Delete",role:"destructive",icon:u.R,handler:function(){console.log("Delete clicked")}},{text:"Share with your friends",icon:u.L,handler:function(){re(!0)}},{text:"Favorite",icon:u.s,handler:function(){console.log("Favorite clicked")}},{text:"Cancel",icon:u.k,role:"cancel",handler:function(){ee(!1)}}]})))}),V=n(99),G=function(){var e=Object(a.useState)(),t=Object(c.a)(e,2),n=t[0],o=t[1],l=Object(a.useState)(),i=Object(c.a)(l,2),m=i[0],u=i[1],d=Object(a.useState)(!1),p=Object(c.a)(d,2),h=p[0],E=p[1],f=Object(a.useState)({logging:!1,logging_msg:""}),g=Object(c.a)(f,2),y=g[0],b=g[1],j=function(){fetch("http://"+window.location.hostname+":8000/api/v1/user/connect/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({login:n,password:m})}).then((function(e){return e.json()})).then((function(e){if(e.response&&e.response.data.token)localStorage.setItem("auth",JSON.stringify(e.response.data)),localStorage.setItem("auth.logged","1"),window.location.pathname="/probes";else if(e.response)b({logging:!0,logging_msg:e.response.data}),E(!0);else{var t=Object.keys(e);b({logging:!0,logging_msg:e[t[0]]}),E(!0)}}))};return r.a.createElement(s.D,null,r.a.createElement(s.m,null,r.a.createElement("div",{className:"row justify-content-center p-4 mt-3"},r.a.createElement(V.a,{alt:"Temper App",src:"/assets/icon/favicon.png",style:{height:"20vh",width:"20vh",marginBottom:"40px"}}),r.a.createElement(x.a,{as:"h3",size:"2xl",textAlign:"center"},"Login"),r.a.createElement("div",{className:"p-4 my-2"},r.a.createElement(s.t,null,r.a.createElement(s.y,{position:"floating"},"Name"),r.a.createElement(s.s,{required:!0,type:"text",onIonChange:function(e){return o(e.detail.value)}})),r.a.createElement(s.t,null,r.a.createElement(s.y,{position:"floating"},"Password"),r.a.createElement(s.s,{required:!0,type:"password",onIonChange:function(e){return u(e.detail.value)}}))),r.a.createElement("div",{className:"py-4 my-2"},r.a.createElement(s.e,{expand:"block",color:"primary",fill:"outline",onClick:function(){return j()}},"Connect to Temper")))),r.a.createElement(s.c,{isOpen:h,onDidDismiss:function(){return E(!1)},cssClass:"my-custom-class",header:"Login : Error",message:y.logging_msg,buttons:["OK, I'll focus"]}))},H=n(101),$=n.n(H),X=n(69),Z=function(){var e=Object(a.useState)(),t=Object(c.a)(e,2),n=t[0],o=t[1],l=Object(a.useState)(),i=Object(c.a)(l,2),m=i[0],u=i[1],d=Object(a.useState)(),p=Object(c.a)(d,2),h=p[0],E=p[1],f=Object(a.useState)(),g=Object(c.a)(f,2),y=g[0],b=g[1],j=Object(a.useState)(!1),O=Object(c.a)(j,2),v=O[0],w=O[1],k=Object(a.useState)({logging:!1,logging_msg:""}),S=Object(c.a)(k,2),N=S[0],C=S[1],_=Object(a.useState)({score:-1,msg:"Start typing your password, we'll tell you its strong",color:""}),I=Object(c.a)(_,2),M=I[0],D=I[1],F=Object(a.useState)({score:0,msg:"",color:""}),T=Object(c.a)(F,2),z=T[0],A=T[1],P=function(){fetch("http://"+window.location.hostname+":8000/api/v1/user/register/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({login:n,password:h,password_confirmation:y,email:m})}).then((function(e){return e.json()})).then((function(e){if(e.response&&e.response.data.token)localStorage.setItem("auth",JSON.stringify(e.response.data)),localStorage.setItem("auth.logged","1"),window.location.pathname="/probes";else if(e.response)C({logging:!0,logging_msg:e.response.data}),w(!0);else{var t=Object.keys(e);C({logging:!0,logging_msg:e[t[0]]}),w(!0)}}))};return r.a.createElement(s.D,null,r.a.createElement(s.m,null,r.a.createElement("div",{className:"row justify-content-center p-4 mt-3"},r.a.createElement(s.q,null,r.a.createElement(s.K,null,r.a.createElement(s.l,null,r.a.createElement(V.a,{alt:"Temper App",src:"/assets/icon/favicon.png",style:{height:"20vh",width:"20vh",marginBottom:"40px"}})),r.a.createElement(s.l,{className:"ion-align-self-center"},r.a.createElement(x.a,{as:"h3",size:"2xl",textAlign:"center"},"Register")))),r.a.createElement("div",{className:"p-4 my-2"},r.a.createElement(s.t,null,r.a.createElement(s.y,{position:"floating"},"Name"),r.a.createElement(s.s,{required:!0,type:"text",onIonChange:function(e){return o(e.detail.value)}})),r.a.createElement(s.t,null,r.a.createElement(s.y,{position:"floating"},"Email (not required)"),r.a.createElement(s.s,{type:"email",onIonChange:function(e){return u(e.detail.value)}})),r.a.createElement(s.t,null,r.a.createElement(s.y,{position:"floating"},"Password"),r.a.createElement(s.s,{required:!0,type:"password",onIonChange:function(e){return function(e){E(e);var t=$()(e),n="",a="";switch(t.score){case 0:case 1:n="Weak, stop rolling your head on your keyboard \ud83d\ude12",a="danger";break;case 2:n="Fair",a="warning";break;case 3:n="Good one but you can do better! \u2714",a="success";break;case 4:n="Rock it! \ud83d\udee1",a="blue";break;default:n="Weak, stop rolling your head on your keyboard \ud83d\ude12",a="danger"}D({score:t.score,msg:n,color:a})}(e.detail.value)}})),r.a.createElement("div",{className:"mt-2 mb-1 mx-3"},r.a.createElement(s.E,{color:M.color,value:.25*M.score}),r.a.createElement(X.a,{fontSize:"xs",className:"ion-color-primary mt-1"},M.msg)),r.a.createElement(s.t,null,r.a.createElement(s.y,{position:"floating"},"Confirm password"),r.a.createElement(s.s,{required:!0,type:"password",onIonChange:function(e){return t=e.detail.value,b(t),void A(t===h?{score:1,msg:"Your passwords are identics \u2705",color:"success"}:{score:.1,msg:"Your passwords are not identics \u26d4",color:"danger"});var t}})),r.a.createElement("div",{className:"mt-2 mb-1 mx-3"},r.a.createElement(s.E,{color:z.color,value:z.score}),r.a.createElement(X.a,{fontSize:"xs",className:"ion-color-primary mt-1"},z.msg))),r.a.createElement("div",{className:"py-4 my-2"},r.a.createElement(s.e,{expand:"block",color:"primary",fill:"outline",onClick:function(){return P()}},"Create an account")))),r.a.createElement(s.c,{isOpen:v,onDidDismiss:function(){return w(!1)},cssClass:"my-custom-class",header:"Register : Error",message:N.logging_msg,buttons:["OK, I'll focus"]}))},ee=function(){return r.a.createElement(s.D,null,"Forgot")};var te=[{path:"/probes",component:A,icon:u.O,label:"Probes"},{path:"/map",component:L,icon:u.v,label:"Map"},{path:"/user",component:q,icon:u.A,label:"User"}],ne=[].concat(te,[{path:"/probe/:id",component:Q},{path:"/dev",component:function(){return r.a.createElement("div",null,"DEV")}},{path:"/about",component:function(){return r.a.createElement("div",null,"About")}}]),ae=[{path:"/register",component:Z,icon:u.B,label:"Register"},{path:"/login",component:G,icon:u.o,label:"Login"},{path:"/forgot",component:ee,icon:u.t,label:"Forgot my password"}],re=n(42),oe=n(240),le=n(41),ce=(n(135),n(136),n(137),n(138),n(139),n(140),n(141),n(142),n(143),n(144),n(145),n(78)),ie=n(238),se=Object(ce.a)(Object(ce.a)({},ie.a),{},{fonts:{body:"Nunito, system-ui, sans-serif",heading:"Nunito, Georgia, serif",mono:"Menlo, monospace"}}),me=(n(146),n(147),r.a.createElement(re.a,{theme:se},r.a.createElement(oe.a,null),r.a.createElement(le.a,null,r.a.createElement(m.a,null,r.a.createElement(s.S,null,r.a.createElement(s.J,null,ne.map((function(e,t){return r.a.createElement(i.c,{path:e.path,component:e.component,exact:!0,key:t})})),r.a.createElement(i.c,{path:"/",render:function(){return r.a.createElement(i.b,{to:"/probes"})},exact:!0})),r.a.createElement(s.Q,{slot:"bottom"},te.map((function(e,t){return r.a.createElement(s.R,{tab:e.label.toLowerCase(),href:e.path,key:t},r.a.createElement(s.r,{icon:e.icon}),r.a.createElement(s.y,null,e.label))})))))))),ue=r.a.createElement(re.a,{theme:se},r.a.createElement(oe.a,null),r.a.createElement(le.a,null,r.a.createElement(m.a,null,r.a.createElement(s.S,null,r.a.createElement(s.J,null,ae.map((function(e,t){return r.a.createElement(i.c,{path:e.path,component:e.component,exact:!0,key:t})})),r.a.createElement(i.c,{path:"/",render:function(){return r.a.createElement(i.b,{to:"/login"})},exact:!0})),r.a.createElement(s.Q,{slot:"bottom"},ae.map((function(e,t){return r.a.createElement(s.R,{tab:e.label.toLowerCase(),href:e.path,key:t},r.a.createElement(s.r,{icon:e.icon}),r.a.createElement(s.y,null,e.label))}))))))),de=function(){var e=Object(a.useState)("true"===localStorage.getItem("darkMode")||!1),t=Object(c.a)(e,2),n=t[0],o=t[1];return localStorage.getItem("auth.logged")||localStorage.setItem("auth.logged","0"),Object(a.useEffect)((function(){var e;o(e=n),localStorage.setItem("darkMode","".concat(e)),document.body.classList.toggle("dark",e)}),[]),z(),r.a.createElement(s.d,null,"1"===localStorage.getItem("auth.logged")?me:ue)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(de,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[103,9,10]]]);
//# sourceMappingURL=main.59d20b55.chunk.js.map